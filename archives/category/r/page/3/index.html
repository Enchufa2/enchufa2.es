<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="/xmlrpc.php">

<title>R &ndash; P&aacute;gina 3 &ndash; Enchufa2</title>
<meta name="robots" content="max-image-preview:large">
	<style>img:is([sizes="auto" i], [sizes^="auto," i]) { contain-intrinsic-size: 3000px 1500px }</style>
	<link rel="dns-prefetch" href="//secure.gravatar.com">
<link rel="dns-prefetch" href="//stats.wp.com">
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//v0.wordpress.com">
<link rel="alternate" type="application/rss+xml" title="Enchufa2 &raquo; Feed" href="/feed">
<link rel="alternate" type="application/rss+xml" title="Enchufa2 &raquo; Feed de los comentarios" href="/comments/feed">
<link rel="alternate" type="application/rss+xml" title="Enchufa2 &raquo; Categor&iacute;a R del feed" href="/archives/category/r/feed">
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/16.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/16.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.8.2"}};
/*! This file is auto-generated */
!function(s,n){var o,i,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),a=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===a[t]})}function u(e,t){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);for(var n=e.getImageData(16,16,1,1),a=0;a<n.data.length;a++)if(0!==n.data[a])return!1;return!0}function f(e,t,n,a){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\udde8\ud83c\uddf6","\ud83c\udde8\u200b\ud83c\uddf6")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!a(e,"\ud83e\udedf")}return!1}function g(e,t,n,a){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):s.createElement("canvas"),o=r.getContext("2d",{willReadFrequently:!0}),i=(o.textBaseline="top",o.font="600 32px Arial",{});return e.forEach(function(e){i[e]=t(o,e,n,a)}),i}function t(e){var t=s.createElement("script");t.src=e,t.defer=!0,s.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",i=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){s.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+g.toString()+"("+[JSON.stringify(i),f.toString(),p.toString(),u.toString()].join(",")+"));",a=new Blob([e],{type:"text/javascript"}),r=new Worker(URL.createObjectURL(a),{name:"wpTestEmojiSupports"});return void(r.onmessage=function(e){c(n=e.data),r.terminate(),t(n)})}catch(e){}c(n=g(i,f,p,u))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id="wp-emoji-styles-inline-css" type="text/css">

	img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}
</style>
<link rel="stylesheet" id="wp-block-library-css" href="/wp-includes/css/dist/block-library/style.min.css?ver=6.8.2" type="text/css" media="all">
<style id="classic-theme-styles-inline-css" type="text/css">
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
</style>
<link rel="stylesheet" id="mediaelement-css" href="/wp-includes/js/mediaelement/mediaelementplayer-legacy.min.css?ver=4.2.17" type="text/css" media="all">
<link rel="stylesheet" id="wp-mediaelement-css" href="/wp-includes/js/mediaelement/wp-mediaelement.min.css?ver=6.8.2" type="text/css" media="all">
<style id="jetpack-sharing-buttons-style-inline-css" type="text/css">
.jetpack-sharing-buttons__services-list{display:flex;flex-direction:row;flex-wrap:wrap;gap:0;list-style-type:none;margin:5px;padding:0}.jetpack-sharing-buttons__services-list.has-small-icon-size{font-size:12px}.jetpack-sharing-buttons__services-list.has-normal-icon-size{font-size:16px}.jetpack-sharing-buttons__services-list.has-large-icon-size{font-size:24px}.jetpack-sharing-buttons__services-list.has-huge-icon-size{font-size:36px}@media print{.jetpack-sharing-buttons__services-list{display:none!important}}.editor-styles-wrapper .wp-block-jetpack-sharing-buttons{gap:0;padding-inline-start:0}ul.jetpack-sharing-buttons__services-list.has-background{padding:1.25em 2.375em}
</style>
<style id="global-styles-inline-css" type="text/css">
:root{--wp--preset--aspect-ratio--square: 1;--wp--preset--aspect-ratio--4-3: 4/3;--wp--preset--aspect-ratio--3-4: 3/4;--wp--preset--aspect-ratio--3-2: 3/2;--wp--preset--aspect-ratio--2-3: 2/3;--wp--preset--aspect-ratio--16-9: 16/9;--wp--preset--aspect-ratio--9-16: 9/16;--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flex{display: flex;}.is-layout-flex{flex-wrap: wrap;align-items: center;}.is-layout-flex > :is(*, div){margin: 0;}body .is-layout-grid{display: grid;}.is-layout-grid > :is(*, div){margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
:root :where(.wp-block-pullquote){font-size: 1.5em;line-height: 1.6;}
</style>
<link rel="stylesheet" id="libre-style-css" href="/wp-content/themes/libre/style.css?ver=6.8.2" type="text/css" media="all">
<link rel="stylesheet" id="libre-libre-css" href="https://fonts.googleapis.com/css?family=Libre+Baskerville%3A400%2C400italic%2C700&amp;subset=latin%2Clatin-ext" type="text/css" media="all">
<link rel="stylesheet" id="sharedaddy-css" href="/wp-content/plugins/jetpack/modules/sharedaddy/sharing.css?ver=14.9.1" type="text/css" media="all">
<link rel="stylesheet" id="social-logos-css" href="/wp-content/plugins/jetpack/_inc/social-logos/social-logos.min.css?ver=14.9.1" type="text/css" media="all">
<script type="text/javascript" src="/wp-includes/js/jquery/jquery.min.js?ver=3.7.1" id="jquery-core-js"></script>
<script type="text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.1" id="jquery-migrate-js"></script>
<link rel="https://api.w.org/" href="/wp-json/"><link rel="alternate" title="JSON" type="application/json" href="/wp-json/wp/v2/categories/47"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.8.2">

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-3472263-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());
  gtag("config", "UA-3472263-1");
</script>
<style type="text/css">
.sfs-subscriber-count { width: 88px; overflow: hidden; height: 26px; color: #424242; font: 9px Verdana, Geneva, sans-serif; letter-spacing: 1px; }
.sfs-count { width: 86px; height: 17px; line-height: 17px; margin: 0 auto; background: #ccc; border: 1px solid #909090; border-top-color: #fff; border-left-color: #fff; }
.sfs-count span { display: inline-block; height: 11px; line-height: 12px; margin: 2px 1px 2px 2px; padding: 0 2px 0 3px; background: #e4e4e4; border: 1px solid #a2a2a2; border-bottom-color: #fff; border-right-color: #fff; }
.sfs-stats { font-size: 6px; line-height: 6px; margin: 1px 0 0 1px; word-spacing: 2px; text-align: center; text-transform: uppercase; }
</style>
	<style>img#wpstats{display:none}</style>
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="website">
<meta property="og:title" content="R &ndash; P&aacute;gina 3 &ndash; Enchufa2">
<meta property="og:url" content="/archives/category/r">
<meta property="og:description" content="Articles about the R language">
<meta property="og:site_name" content="Enchufa2">
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg">
<meta property="og:image:width" content="200">
<meta property="og:image:height" content="200">
<meta property="og:image:alt" content="">
<meta property="og:locale" content="es_ES">
<meta name="twitter:site" content="@Enchufa2">

<!-- End Jetpack Open Graph Tags -->
		<style type="text/css" id="wp-custom-css">
			/*
Te damos la bienvenida a CSS personalizado

Para saber c&oacute;mo funciona, ve a http://wp.me/PEmnE-Bt
*/
.widget_wpcom_social_media_icons_widget .genericon {
	font-size: 32px;
}

.mejs-container {
	margin-bottom: 1.75em;
}

.twitter-tweet {
	margin: 0 auto;
}

.site-header:after {
	border-top: 1px solid;
	content: "";
	display: block;
	margin-top: .875em;
	width: 100%;
}

.site-title {
	font-family: 'Alien Encounters';
}

.site-title a {
	color: #d24d4d;
}

#secondary img {
	-webkit-filter: grayscale(100%);
	-moz-filter: grayscale(100%);
	-ms-filter: grayscale(100%);
	filter: grayscale(100%);
}

code, kbd, pre, samp {
    font-family: monospace;
}
code {
    padding: 2px 4px;
    font-size: 90%;
    color: #c7254e;
    background-color: #f9f2f4;
    border-radius: 4px;
}


pre {
    display: block;
    padding: 9.5px;
    margin: 0 0 10px;
    font-size: 13px;
    line-height: 1.42857143;
    color: #333;
    word-break: break-all;
    word-wrap: break-word;
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    border-radius: 4px;
}

pre:not([class]) {
  background-color: white;
}

pre:not([class]) code {
  background-color: white;
}

pre:not([class]) code * {
	color: #444;
	font-weight: normal;
	
}

pre code {
    padding: 0;
    font-size: inherit;
    color: inherit;
    white-space: pre;
    background-color: transparent;
    border-radius: 0;
}

.syntaxhighlighter { 
	font-size: 13px !important;}
		</style>
		</head>

<body class="archive paged category category-r category-47 paged-3 category-paged-3 wp-theme-libre group-blog">
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Ir al contenido</a>
		<header id="masthead" class="site-header" role="banner">
		<div class="site-branding">
							<a href="/" class="site-logo-link" rel="home" itemprop="url"></a>										<p class="site-title"><a href="/" rel="home">Enchufa2</a></p>
								<p class="site-description"><script>
  var taglines = [
    '¿Has probado a apagarlo y encenderlo?',
    'Las erratas son las últimas en abandonar el blog',
    '2B OR NOT 2B = FF',
    'Computo, ergo sum',
    'Creado en 0x7D7',
    'Hoy no me puedo compilar',
    'Be binary, my friend',
    'Aquí se respeta la Primera Ley de la Termodinámica',
    'Rasca la pantalla para ver si tienes premio',
    'Cualquier parecido con la realidad sería divertido',
    'Las cosas no son siempre #FFF o #000',
    'El futuro está en versión beta',
    'Basado en hechos reales',
    'El último que apague la luz',
    'Manténgase fuera del alcance de los niños',
    '1. m. y f. Personas que han obtenido un cargo o destino por enchufe',
    'Al final Bruce Willis está muerto',
    'Administrar en pequeñas dosis',
    'Lo bueno, si es Fedora, dos veces bueno',
    'otse odneyel otar neub nu odidrep saH',
    'Mira detrás de ti: ¡un mono con tres cabezas!',
    'Ningún byte ha sido maltratado durante la realización de este blog',
    'Tu lugar favorito de procrastinación',
    'Conservar en lugar fresco y seco',
    'On a mission to civilise',
    'Keyboard not detected. Press any key to continue...',
    '¿Quién coño es el General Failure y qué hace leyendo mi disco duro?',
    'Este tagline se autodestruirá en un F5',
    'Prohibida la entrada de ranas',
    'sudo make tagline',
    'Buscando un subtítulo ingenioso desde 2007',
    'Aceptamos Windows como sistema operativo',
    '¿Seguro que no tienes nada mejor que hacer?',
    'Cualquier tiempo pasado fue anterior',
    'Prohibido hacer pintadas',
    'Vuelva usted mañana',
    'Producto los orden de factores el no altera el',
    'La vida es una barca dijo Calderón de la mierda',
    'Comenta con moderación, es tu responsabilidad',
    'Quisiera cambiar el mundo, pero no dispongo del código fuente',
    'I’m not anti-social; I’m just not user friendly',
    'It’s not a <em>bug</em>; it’s a <em>feature</em>',
    'El vaso no esta medio lleno ni medio vacío: es de tamaño doble del necesario',
    'Introduzca cualquier número primo de 11 dígitos para continuar...',
    'La Inteligencia Artificial no es rival para la Estupidez Natural',
    '¿Una vida? ¡Genial! ¿Dónde puedo descargar una de esas?',
    'IBSN: 8-854-187-817',
    'El gato de Schrödinger <blink>no</blink> está muerto',
    'Para los de la LOGSE: ENCHUFADOS',
    'Este blog deforma el espacio y el tiempo en sus inmediaciones',
    'Cualquier uso de este blog aumentará la entropía del Universo',
    'Un montón de bits ordenados de manera peculiar',
    'No vengas a rezar a mi escuela y yo no iré a pensar a tu iglesia',
    'Blog de periodicidad <acronym title="AKA la que nos sale de los huevos">genital</acronym>',
    'Yet another instance of www'
  ];
  document.write(taglines[Math.floor(Math.random() * (taglines.length + 1))])
</script>
<noscript>Prohibida la entrada de ranas</noscript>
</p>
		</div><!-- .site-branding -->

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle" aria-controls="primary-menu" aria-expanded="false">Menu</button>
			<div class="menu-menu-princinpal-container"><ul id="primary-menu" class="menu"><li id="menu-item-62594" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-62594"><a href="/">Inicio</a></li>
<li id="menu-item-66543" class="menu-item menu-item-type-taxonomy menu-item-object-category current-menu-item menu-item-66543"><a href="/archives/category/r" aria-current="page">R stuff</a></li>
<li id="menu-item-62595" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-62595"><a href="/acerca_de">Acerca de Enchufa2</a>
<ul class="sub-menu">
	<li id="menu-item-62596" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-62596"><a href="/acerca_de/almudena">Acerca de Almudena</a></li>
	<li id="menu-item-62597" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-62597"><a href="/acerca_de/inaki">Acerca de I&ntilde;aki</a></li>
</ul>
</li>
<li id="menu-item-62611" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-62611"><a href="/archives">Archivos</a>
<ul class="sub-menu">
	<li id="menu-item-62600" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62600"><a href="/archives/category/arte">Arte</a></li>
	<li id="menu-item-62601" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62601"><a href="/archives/category/cajondesastre">Caj&oacute;n de sastre</a></li>
	<li id="menu-item-62602" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62602"><a href="/archives/category/ciencia">Ciencia</a></li>
	<li id="menu-item-62603" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62603"><a href="/archives/category/enchufa2">Enchufa2</a></li>
	<li id="menu-item-62604" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62604"><a href="/archives/category/escepticismo">Escepticismo</a></li>
	<li id="menu-item-62605" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62605"><a href="/archives/category/frases-citas">Frases / Citas</a></li>
	<li id="menu-item-62606" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62606"><a href="/archives/category/humor">Humor</a></li>
	<li id="menu-item-62607" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62607"><a href="/archives/category/musica">M&uacute;sica</a></li>
	<li id="menu-item-62608" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62608"><a href="/archives/category/opinion">Opini&oacute;n</a></li>
	<li id="menu-item-63330" class="menu-item menu-item-type-taxonomy menu-item-object-category current-menu-item menu-item-63330"><a href="/archives/category/r" aria-current="page">R</a></li>
	<li id="menu-item-62609" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62609"><a href="/archives/category/tecnico">T&eacute;cnico</a></li>
	<li id="menu-item-62610" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-62610"><a href="/archives/category/tecnologia">Tecnolog&iacute;a</a></li>
</ul>
</li>
<li id="menu-item-62599" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-62599"><a href="/contacto">Contacto</a></li>
</ul></div>		</nav><!-- #site-navigation -->

	</header><!-- #masthead -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			<header class="page-header">
				<h1 class="page-title">Categor&iacute;a: <span>R</span></h1><div class="taxonomy-description"><p>Articles about the R language</p>
</div><!-- .taxonomy-description -->			</header><!-- .page-header -->

						
				
<article id="post-66964" class="post-66964 post type-post status-publish format-standard hentry category-r">
	<header class="entry-header">
		
					<h2 class="entry-title"><a href="/archives/simmer-4-0-1.html" rel="bookmark">simmer 4.0.1</a></h2>				
				<div class="entry-meta">
			<span class="posted-on"><a href="/archives/simmer-4-0-1.html" rel="bookmark"><time class="entry-date published updated" datetime="2018-09-28T16:39:12+02:00">28 septiembre 2018</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="/archives/author/admin">I&ntilde;aki &Uacute;car</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>The 4.0.1 release of&nbsp;<a href="http://r-simmer.org/">simmer</a>, the Discrete-Event Simulator for R, is on CRAN since a couple of weeks ago. There are few changes, notably new getters (<code>get_sources()</code>,&nbsp;<code>get_resources()</code>,&nbsp;<code>get_trajectory()</code>) for&nbsp;<code>simmer</code>&nbsp;environments and some improvements in resource selection policies (see details in&nbsp;<code>help(select)</code>).</p>
<p>A new convenience function,&nbsp;<code>when_activated</code>, makes it easier to generate arrivals on demand, triggered from trajectories. Let us consider, for instance, a simple restocking pattern:</p>
<pre class="r"><code class="hljs"><span class="hljs-keyword">library</span>(simmer)

restock &lt;- trajectory() %&gt;%
  log_(<span class="hljs-string">"restock"</span>)

serve &lt;- trajectory() %&gt;%
  log_(<span class="hljs-string">"serve"</span>) %&gt;%
  activate(<span class="hljs-string">"Restock"</span>)

env &lt;- simmer() %&gt;%
  add_generator(<span class="hljs-string">"Customer"</span>, serve, at(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)) %&gt;%
  add_generator(<span class="hljs-string">"Restock"</span>, restock, when_activated()) %&gt;%
  run()</code></pre>
<pre><code class="hljs">## 1: Customer0: serve
## 1: Restock0: restock
## 2: Customer1: serve
## 2: Restock1: restock
## 3: Customer2: serve
## 3: Restock2: restock</code></pre>
<p>Finally, this release leverages the&nbsp;<a href="/archives/boost-the-speed-of-r-calls-from-rcpp.html">new fast evaluation framework</a>&nbsp;offered by&nbsp;<code>Rcpp</code>&nbsp;(&gt;= 0.12.18) by default, and includes some minor improvements and bug fixes.</p>
<div id="new-features" class="section level3">
<h3>New features:</h3>
<ul>
<li>New getters (#159):
<ul>
<li><code>get_sources()</code>&nbsp;and&nbsp;<code>get_resources()</code>&nbsp;retrieve a character vector of source/resource names defined in a simulation environment.</li>
<li><code>get_trajectory()</code>&nbsp;retrieves a trajectory to which a given source is attached.</li>
</ul>
</li>
<li>New resource selection policies:&nbsp;<code>shortest-queue-available</code>,&nbsp;<code>round-robin-available</code>,&nbsp;<code>random-available</code>&nbsp;(#156). These are the same as the existing non-<code>available</code>&nbsp;ones, but they exclude unavailable resources (capacity set to zero). Thus, if all resources are unavailable, an error is raised.</li>
</ul>
</div>
<div id="minor-changes-and-fixes" class="section level3">
<h3>Minor changes and fixes:</h3>
<ul>
<li>Rename&nbsp;<code>-DRCPP_PROTECTED_EVAL</code>&nbsp;(Rcpp &gt;= 0.12.17.4) as&nbsp;<code>-DRCPP_USE_UNWIND_PROTECT</code>&nbsp;(6d27671).</li>
<li>Keep compilation quieter with&nbsp;<code>-DBOOST_NO_AUTO_PTR</code>&nbsp;(70328b6).</li>
<li>Improve&nbsp;<code>log_</code>&nbsp;print (7c2e3b1).</li>
<li>Add&nbsp;<code>when_activated()</code>&nbsp;convenience function to easily generate arrivals on demand from trajectories (#161 closing #160).</li>
<li>Enhance&nbsp;<code>schedule</code>&nbsp;printing (9c66285).</li>
<li>Fix generator-manager name clashing (#163).</li>
<li>Deprecate&nbsp;<code>set_attribute(global=TRUE)</code>,&nbsp;<code>get_attribute(global=TRUE)</code>&nbsp;and&nbsp;<code>timeout_from_attribute(global=TRUE)</code>&nbsp;(#164), the&nbsp;<code>*_global</code>&nbsp;versions should be used instead.</li>
</ul>
</div>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Comparte esto:</h3><div class="sd-content"><ul><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-66964" class="share-facebook sd-button share-icon" href="/archives/simmer-4-0-1.html?share=facebook" target="_blank" aria-labelledby="sharing-facebook-66964">
				<span id="sharing-facebook-66964" hidden>Haz clic para compartir en Facebook (Se abre en una ventana nueva)</span>
				<span>Facebook</span>
			</a></li><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-66964" class="share-twitter sd-button share-icon" href="/archives/simmer-4-0-1.html?share=twitter" target="_blank" aria-labelledby="sharing-twitter-66964">
				<span id="sharing-twitter-66964" hidden>Haz clic para compartir en X (Se abre en una ventana nueva)</span>
				<span>X</span>
			</a></li><li class="share-reddit"><a rel="nofollow noopener noreferrer" data-shared="sharing-reddit-66964" class="share-reddit sd-button share-icon" href="/archives/simmer-4-0-1.html?share=reddit" target="_blank" aria-labelledby="sharing-reddit-66964">
				<span id="sharing-reddit-66964" hidden>Haz clic para compartir en Reddit (Se abre en una ventana nueva)</span>
				<span>Reddit</span>
			</a></li><li class="share-tumblr"><a rel="nofollow noopener noreferrer" data-shared="sharing-tumblr-66964" class="share-tumblr sd-button share-icon" href="/archives/simmer-4-0-1.html?share=tumblr" target="_blank" aria-labelledby="sharing-tumblr-66964">
				<span id="sharing-tumblr-66964" hidden>Haz clic para compartir en Tumblr (Se abre en una ventana nueva)</span>
				<span>Tumblr</span>
			</a></li><li class="share-pinterest"><a rel="nofollow noopener noreferrer" data-shared="sharing-pinterest-66964" class="share-pinterest sd-button share-icon" href="/archives/simmer-4-0-1.html?share=pinterest" target="_blank" aria-labelledby="sharing-pinterest-66964">
				<span id="sharing-pinterest-66964" hidden>Haz clic para compartir en Pinterest (Se abre en una ventana nueva)</span>
				<span>Pinterest</span>
			</a></li><li class="share-linkedin"><a rel="nofollow noopener noreferrer" data-shared="sharing-linkedin-66964" class="share-linkedin sd-button share-icon" href="/archives/simmer-4-0-1.html?share=linkedin" target="_blank" aria-labelledby="sharing-linkedin-66964">
				<span id="sharing-linkedin-66964" hidden>Haz clic para compartir en LinkedIn (Se abre en una ventana nueva)</span>
				<span>LinkedIn</span>
			</a></li><li class="share-end"></ul></div></div></div>
			</div><!-- .entry-content -->
</article><!-- #post-## -->

			
				
<article id="post-66804" class="post-66804 post type-post status-publish format-standard hentry category-r">
	<header class="entry-header">
		
					<h2 class="entry-title"><a href="/archives/read-the-docs-before-questioning-rs-defaults.html" rel="bookmark">Read the docs before questioning R&rsquo;s defaults</a></h2>				
				<div class="entry-meta">
			<span class="posted-on"><a href="/archives/read-the-docs-before-questioning-rs-defaults.html" rel="bookmark"><time class="entry-date published updated" datetime="2018-08-22T12:37:00+02:00">22 agosto 2018</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="/archives/author/admin">I&ntilde;aki &Uacute;car</a></span></span><span class="comments-link"><a href="/archives/read-the-docs-before-questioning-rs-defaults.html#comments">5 comentarios</a></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>The latest&nbsp;<em>R tip</em>&nbsp;in&nbsp;<em>Win-Vector Blog</em>&nbsp;encourages you to&nbsp;<a href="http://www.win-vector.com/blog/2018/08/r-tip-use-radix-sort/"><em>Use Radix Sort</em></a>&nbsp;based on a simple benchmark showing a x35 speedup compared to the default method, but with no further explanation. In my opinion, though, the&nbsp;<em>complete</em>&nbsp;tip would be, instead,&nbsp;<em>use radix sort&hellip;&nbsp;<strong>if you know what you are doing</strong></em>, because a quick benchmark shouldn&rsquo;t spare you the effort of actually reading the docs. And here is a spoiler: <em>you are already using it</em>.</p>
<p>One may wonder why R&rsquo;s default sorting algorithm is so bad, and why was even chosen. The thing is that there is a trick here, and to understand it, first we must understand the benchmark&rsquo;s data and then read the docs. This is the function from the&nbsp;<a href="https://github.com/WinVector/rqdatatable/blob/master/extras/radix_timing.md">original code</a>&nbsp;(slightly modified for subsequent reuse) that generates the data:</p>
<pre class="r"><code class="hljs">mk_data &lt;- <span class="hljs-keyword">function</span>(nrow, stringsAsFactors = <span class="hljs-literal">FALSE</span>) {
  alphabet &lt;- paste(<span class="hljs-string">"sym"</span>, seq_len(max(<span class="hljs-number">2</span>, floor(nrow^(<span class="hljs-number">1</span>/<span class="hljs-number">3</span>)))), sep = <span class="hljs-string">"_"</span>)
  data.frame(col_a = sample(alphabet, nrow, replace=<span class="hljs-literal">TRUE</span>),
             col_b = sample(alphabet, nrow, replace=<span class="hljs-literal">TRUE</span>),
             col_c = sample(alphabet, nrow, replace=<span class="hljs-literal">TRUE</span>),
             col_x = runif(nrow),
             stringsAsFactors = stringsAsFactors)
}

set.seed(<span class="hljs-number">32523</span>)
d &lt;- mk_data(<span class="hljs-number">1e+6</span>)

summary(d)</code></pre>
<pre><code class="hljs">##     col_a              col_b              col_c          
##  Length:1000000     Length:1000000     Length:1000000    
##  Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character  
##                                                          
##                                                          
##                                                          
##      col_x          
##  Min.   :0.0000002  
##  1st Qu.:0.2496717  
##  Median :0.4991010  
##  Mean   :0.4996031  
##  3rd Qu.:0.7494089  
##  Max.   :0.9999999</code></pre>
<pre class="r"><code class="hljs">length(table(d$col_a))</code></pre>
<pre><code class="hljs">## [1] 99</code></pre>
<p>There are three character columns sampled from 99 symbols (<code>sym_1</code>,&nbsp;<code>sym_2</code>, &hellip;,&nbsp;<code>sym_99</code>) and a numeric column sampled from a uniform. The first three columns are thus clearly factors, but they are not treated as such. Let&rsquo;s see now what&nbsp;<code>help(sort)</code>&nbsp;has to tell us about the sorting method, which by default is&nbsp;<code>method="auto"</code>:</p>
<blockquote><p>The &ldquo;auto&rdquo; method selects &ldquo;radix&rdquo; for short (less than 2^31 elements) numeric vectors, integer vectors, logical vectors and factors; otherwise, &ldquo;shell&rdquo;.</p></blockquote>
<p>So, as I said in the opening paragraph, you are&nbsp;<em>already</em>&nbsp;using radix sort, except for characters. Let&rsquo;s see then what happens if we treat such columns as proper factors:</p>
<pre class="r"><code class="hljs"><span class="hljs-keyword">library</span>(microbenchmark)

set.seed(<span class="hljs-number">32523</span>)
d &lt;- mk_data(<span class="hljs-number">1e+6</span>, stringsAsFactors = <span class="hljs-literal">TRUE</span>)

timings &lt;- microbenchmark(
  order_default = d[order(d$col_a, d$col_b, d$col_c, d$col_x), , 
                    drop = <span class="hljs-literal">FALSE</span>],
  order_radix = d[order(d$col_a, d$col_b, d$col_c, d$col_x,
                        method = <span class="hljs-string">"radix"</span>), ,
                  drop = <span class="hljs-literal">FALSE</span>],
  times = <span class="hljs-number">10L</span>)

print(timings)</code></pre>
<pre><code class="hljs">## Unit: milliseconds
##           expr      min       lq     mean   median       uq      max neval
##  order_default 289.4685 312.0257 388.5259 387.8308 418.2673 584.4771    10
##    order_radix 265.6491 321.8337 421.2072 376.1166 512.0047 667.0545    10
##  cld
##    a
##    a</code></pre>
<p>Unsurprisingly, timings are the same, because R automatically selects&nbsp;<code>"radix"</code>&nbsp;for you when appropriate. But when is it considered appropriate and why isn&rsquo;t it appropriate&nbsp;<em>in general</em>&nbsp;for character vectors? We should go back to the docs:</p>
<blockquote><p>The implementation is orders of magnitude faster than shell sort for character vectors, in part thanks to clever use of the internal CHARSXP table.</p>
<p>However, there are some caveats with the radix sort:</p>
<ul>
<li>If x is a character vector, all elements must share the same encoding. Only UTF-8 (including ASCII) and Latin-1 encodings are supported. Collation always follows the &ldquo;C&rdquo; locale.</li>
<li>Long vectors (with more than 2^32 elements) and complex vectors are not supported yet.</li>
</ul>
</blockquote>
<p>An there it is: R is doing the right thing for you for the general case. So let us round up the tip:&nbsp;<em>enforce&nbsp;<code>method="radix"</code>&nbsp;for character vectors if you know what you are doing</em>. And, please, do read the docs.</p>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Comparte esto:</h3><div class="sd-content"><ul><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-66804" class="share-facebook sd-button share-icon" href="/archives/read-the-docs-before-questioning-rs-defaults.html?share=facebook" target="_blank" aria-labelledby="sharing-facebook-66804">
				<span id="sharing-facebook-66804" hidden>Haz clic para compartir en Facebook (Se abre en una ventana nueva)</span>
				<span>Facebook</span>
			</a></li><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-66804" class="share-twitter sd-button share-icon" href="/archives/read-the-docs-before-questioning-rs-defaults.html?share=twitter" target="_blank" aria-labelledby="sharing-twitter-66804">
				<span id="sharing-twitter-66804" hidden>Haz clic para compartir en X (Se abre en una ventana nueva)</span>
				<span>X</span>
			</a></li><li class="share-reddit"><a rel="nofollow noopener noreferrer" data-shared="sharing-reddit-66804" class="share-reddit sd-button share-icon" href="/archives/read-the-docs-before-questioning-rs-defaults.html?share=reddit" target="_blank" aria-labelledby="sharing-reddit-66804">
				<span id="sharing-reddit-66804" hidden>Haz clic para compartir en Reddit (Se abre en una ventana nueva)</span>
				<span>Reddit</span>
			</a></li><li class="share-tumblr"><a rel="nofollow noopener noreferrer" data-shared="sharing-tumblr-66804" class="share-tumblr sd-button share-icon" href="/archives/read-the-docs-before-questioning-rs-defaults.html?share=tumblr" target="_blank" aria-labelledby="sharing-tumblr-66804">
				<span id="sharing-tumblr-66804" hidden>Haz clic para compartir en Tumblr (Se abre en una ventana nueva)</span>
				<span>Tumblr</span>
			</a></li><li class="share-pinterest"><a rel="nofollow noopener noreferrer" data-shared="sharing-pinterest-66804" class="share-pinterest sd-button share-icon" href="/archives/read-the-docs-before-questioning-rs-defaults.html?share=pinterest" target="_blank" aria-labelledby="sharing-pinterest-66804">
				<span id="sharing-pinterest-66804" hidden>Haz clic para compartir en Pinterest (Se abre en una ventana nueva)</span>
				<span>Pinterest</span>
			</a></li><li class="share-linkedin"><a rel="nofollow noopener noreferrer" data-shared="sharing-linkedin-66804" class="share-linkedin sd-button share-icon" href="/archives/read-the-docs-before-questioning-rs-defaults.html?share=linkedin" target="_blank" aria-labelledby="sharing-linkedin-66804">
				<span id="sharing-linkedin-66804" hidden>Haz clic para compartir en LinkedIn (Se abre en una ventana nueva)</span>
				<span>LinkedIn</span>
			</a></li><li class="share-end"></ul></div></div></div>
			</div><!-- .entry-content -->
</article><!-- #post-## -->

			
				
<article id="post-66553" class="post-66553 post type-post status-publish format-standard hentry category-r">
	<header class="entry-header">
		
					<h2 class="entry-title"><a href="/archives/boost-the-speed-of-r-calls-from-rcpp.html" rel="bookmark">Boost the speed of R calls from Rcpp</a></h2>				
				<div class="entry-meta">
			<span class="posted-on"><a href="/archives/boost-the-speed-of-r-calls-from-rcpp.html" rel="bookmark"><time class="entry-date published updated" datetime="2018-07-24T12:29:27+02:00">24 julio 2018</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="/archives/author/admin">I&ntilde;aki &Uacute;car</a></span></span><span class="comments-link"><a href="/archives/boost-the-speed-of-r-calls-from-rcpp.html#comments">4 comentarios</a></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>If you are a user who needs to work with&nbsp;<code>Rcpp</code>-based packages, or you are a maintainer of one of such packages, you may be interested in the recent development of the unwind API, which can be leveraged to boost performance since&nbsp;<a href="http://dirk.eddelbuettel.com/blog/2018/07/23/#rcpp_0.12.18">the last&nbsp;<code>Rcpp</code>&nbsp;update</a>. In a nutshell, until R 3.5.0, every R call from C++ code was executed inside a try-catch, which is really slow, to avoid breaking things apart. From v3.5.0 on, this API provides a new and safe fast evaluation path for such calls.</p>
<div id="some-motivation" class="section level3">
<h3>Some motivation</h3>
<p>Here is a small comparison of the old and the new APIs. The following toy example just calls an R function&nbsp;<code>N</code>&nbsp;times from C++. A pure R&nbsp;<code>for</code>&nbsp;loop is also provided as a reference.</p>
<pre class="r"><code class="hljs">Rcpp::cppFunction(<span class="hljs-string">'
  void old_api(Function func, int n) {
    for (int i=0; i&lt;n; i++) func();
  }
'</span>)

Rcpp::cppFunction(plugins = <span class="hljs-string">"unwindProtect"</span>, <span class="hljs-string">'
  void new_api(Function func, int n) {
    for (int i=0; i&lt;n; i++) func();
  }
'</span>)

reference &lt;- <span class="hljs-keyword">function</span>(func, N) {
  <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span>:N) func()
}

func &lt;- <span class="hljs-keyword">function</span>() <span class="hljs-number">1</span>
N &lt;- <span class="hljs-number">1e6</span>

system.time(old_api(func, N))</code></pre>
<pre><code class="hljs">##    user  system elapsed 
##  17.863   0.006  17.950</code></pre>
<pre class="r"><code class="hljs">system.time(new_api(func, N))</code></pre>
<pre><code class="hljs">##    user  system elapsed 
##   0.289   0.000   0.290</code></pre>
<pre class="r"><code class="hljs">system.time(reference(func, N))</code></pre>
<pre><code class="hljs">##    user  system elapsed 
##   0.216   0.000   0.217</code></pre>
<p>Obviously, there is still some penalty compared to not switching between domains, but the performance gain with respect to the old API is outstanding.</p>
</div>
<div id="a-real-world-example" class="section level3">
<h3>A real-world example</h3>
<p>This is a quite heavy simulation of an M/M/1 system using&nbsp;<code>simmer</code>:</p>
<pre class="r"><code class="hljs"><span class="hljs-keyword">library</span>(simmer)

system.time({
  mm1 &lt;- trajectory() %&gt;%
    seize(<span class="hljs-string">"server"</span>, <span class="hljs-number">1</span>) %&gt;%
    timeout(<span class="hljs-keyword">function</span>() rexp(<span class="hljs-number">1</span>, <span class="hljs-number">66</span>)) %&gt;%
    release(<span class="hljs-string">"server"</span>, <span class="hljs-number">1</span>)

  env &lt;- simmer() %&gt;%
    add_resource(<span class="hljs-string">"server"</span>, <span class="hljs-number">1</span>) %&gt;%
    add_generator(<span class="hljs-string">"customer"</span>, mm1, <span class="hljs-keyword">function</span>() rexp(<span class="hljs-number">50</span>, <span class="hljs-number">60</span>), mon=<span class="hljs-literal">F</span>) %&gt;%
    run(<span class="hljs-number">10000</span>, progress=progress::progress_bar$new()$update)
})</code></pre>
<p>In my system, it takes around&nbsp;<strong>17 seconds</strong>&nbsp;with the old API. The new API makes it in&nbsp;<strong>less than 5 seconds</strong>. As a reference, if we avoid R calls in the&nbsp;<code>timeout</code>&nbsp;activity and precompute all the arrivals instead of defining a dynamic generator, i.e.:</p>
<pre class="r"><code class="hljs">system.time({
  input &lt;- data.frame(
    time = rexp(<span class="hljs-number">10000</span>*<span class="hljs-number">60</span>, <span class="hljs-number">60</span>),
    service = rexp(<span class="hljs-number">10000</span>*<span class="hljs-number">60</span>, <span class="hljs-number">66</span>)
  )

  mm1 &lt;- trajectory() %&gt;%
    seize(<span class="hljs-string">"server"</span>, <span class="hljs-number">1</span>) %&gt;%
    timeout_from_attribute(<span class="hljs-string">"service"</span>) %&gt;%
    release(<span class="hljs-string">"server"</span>, <span class="hljs-number">1</span>)

  env &lt;- simmer() %&gt;%
    add_resource(<span class="hljs-string">"server"</span>, <span class="hljs-number">1</span>) %&gt;%
    add_dataframe(<span class="hljs-string">"customer"</span>, mm1, input, mon=<span class="hljs-literal">F</span>, batch=<span class="hljs-number">50</span>) %&gt;%
    run(<span class="hljs-number">10000</span>, progress=progress::progress_bar$new()$update)
})</code></pre>
<p>then the simulation takes&nbsp;<strong>around 2.5 seconds</strong>.</p>
</div>
<div id="how-to-start-using-this-feature" class="section level3">
<h3>How to start using this feature</h3>
<p>First of all, you need R &gt;= 3.5.0 and Rcpp &gt;= 0.12.18 installed. Then, if you are a user, the easiest way to enable this globally is to add&nbsp;<code>CPPFLAGS += -DRCPP_USE_UNWIND_PROTECT</code>&nbsp;to your&nbsp;<code>~/.R/Makevars</code>. Packages installed or re-installed, as well as functions compiled with&nbsp;<code>Rcpp::sourceCpp</code>&nbsp;and&nbsp;<code>Rcpp::cppFunction</code>, will benefit from this performance gains. If you are a package maintainer, you can add&nbsp;<code>-DRCPP_USE_UNWIND_PROTECT</code>&nbsp;to your package&rsquo;s&nbsp;<code>PKG_CPPFLAGS</code>&nbsp;in&nbsp;<code>src/Makevars</code>. Alternatively, there is a plugin available, so this flag can be enabled by adding&nbsp;<code>[[Rcpp::plugins(unwindProtect)]]</code>&nbsp;to one of your source files.</p>
<p>Note that this is fairly safe according to reverse dependency checks, but there might be still issues in some packages. But the sooner we start testing this feature and reporting possible issues, the sooner it will be enabled by default in&nbsp;<code>Rcpp</code>.</p>
</div>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Comparte esto:</h3><div class="sd-content"><ul><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-66553" class="share-facebook sd-button share-icon" href="/archives/boost-the-speed-of-r-calls-from-rcpp.html?share=facebook" target="_blank" aria-labelledby="sharing-facebook-66553">
				<span id="sharing-facebook-66553" hidden>Haz clic para compartir en Facebook (Se abre en una ventana nueva)</span>
				<span>Facebook</span>
			</a></li><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-66553" class="share-twitter sd-button share-icon" href="/archives/boost-the-speed-of-r-calls-from-rcpp.html?share=twitter" target="_blank" aria-labelledby="sharing-twitter-66553">
				<span id="sharing-twitter-66553" hidden>Haz clic para compartir en X (Se abre en una ventana nueva)</span>
				<span>X</span>
			</a></li><li class="share-reddit"><a rel="nofollow noopener noreferrer" data-shared="sharing-reddit-66553" class="share-reddit sd-button share-icon" href="/archives/boost-the-speed-of-r-calls-from-rcpp.html?share=reddit" target="_blank" aria-labelledby="sharing-reddit-66553">
				<span id="sharing-reddit-66553" hidden>Haz clic para compartir en Reddit (Se abre en una ventana nueva)</span>
				<span>Reddit</span>
			</a></li><li class="share-tumblr"><a rel="nofollow noopener noreferrer" data-shared="sharing-tumblr-66553" class="share-tumblr sd-button share-icon" href="/archives/boost-the-speed-of-r-calls-from-rcpp.html?share=tumblr" target="_blank" aria-labelledby="sharing-tumblr-66553">
				<span id="sharing-tumblr-66553" hidden>Haz clic para compartir en Tumblr (Se abre en una ventana nueva)</span>
				<span>Tumblr</span>
			</a></li><li class="share-pinterest"><a rel="nofollow noopener noreferrer" data-shared="sharing-pinterest-66553" class="share-pinterest sd-button share-icon" href="/archives/boost-the-speed-of-r-calls-from-rcpp.html?share=pinterest" target="_blank" aria-labelledby="sharing-pinterest-66553">
				<span id="sharing-pinterest-66553" hidden>Haz clic para compartir en Pinterest (Se abre en una ventana nueva)</span>
				<span>Pinterest</span>
			</a></li><li class="share-linkedin"><a rel="nofollow noopener noreferrer" data-shared="sharing-linkedin-66553" class="share-linkedin sd-button share-icon" href="/archives/boost-the-speed-of-r-calls-from-rcpp.html?share=linkedin" target="_blank" aria-labelledby="sharing-linkedin-66553">
				<span id="sharing-linkedin-66553" hidden>Haz clic para compartir en LinkedIn (Se abre en una ventana nueva)</span>
				<span>LinkedIn</span>
			</a></li><li class="share-end"></ul></div></div></div>
			</div><!-- .entry-content -->
</article><!-- #post-## -->

			
				
<article id="post-66547" class="post-66547 post type-post status-publish format-standard hentry category-r">
	<header class="entry-header">
		
					<h2 class="entry-title"><a href="/archives/simmer-4-0-0.html" rel="bookmark">simmer 4.0.0</a></h2>				
				<div class="entry-meta">
			<span class="posted-on"><a href="/archives/simmer-4-0-0.html" rel="bookmark"><time class="entry-date published updated" datetime="2018-07-21T21:27:19+02:00">21 julio 2018</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="/archives/author/admin">I&ntilde;aki &Uacute;car</a></span></span><span class="comments-link"><a href="/archives/simmer-4-0-0.html#comments">2 comentarios</a></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>The 4.0.0 release of&nbsp;<a href="http://r-simmer.org/">simmer</a>, the Discrete-Event Simulator for R, is on CRAN under a new license: we decided to switch to GPL &gt;= 2. Most notably in this major release, the C++ core has been refactorised and exposed under&nbsp;<code>inst/include</code>. This is not a big deal for most users, but it enables extensions. As an example of this,&nbsp;<a href="https://github.com/r-simmer/simmer.mon"><code>simmer.mon</code></a>&nbsp;is an experimental package that links to&nbsp;<code>simmer</code>&nbsp;and extends its monitoring facilities to provide a new DBI-based backend. Not a very efficient one, but it demonstrates how to extend the&nbsp;<code>simmer</code>&nbsp;core from another package.</p>
<p>Exception handling has been remarkably improved. In previous releases, errors were reported to happen in the&nbsp;<code>run()</code>&nbsp;method, which is&hellip; everything that can happen, obviously. In this version, errors are catched and more information is provided, particularly about the simulation time, the arrival and the activity involved:</p>
<pre class="r"><code class="hljs"><span class="hljs-keyword">library</span>(simmer)

bad.traj &lt;- trajectory() %&gt;%
  timeout(<span class="hljs-keyword">function</span>() <span class="hljs-literal">NA</span>)

simmer() %&gt;%
  add_generator(<span class="hljs-string">"dummy"</span>, bad.traj, at(pi)) %&gt;%
  run()</code></pre>
<pre><code class="hljs">## Error: 'dummy0' at 3.14 in 'Timeout':
##  missing value (NA or NaN returned)</code></pre>
<p>Another improvement has to do with attributes. These are commonly used to build incremental indices, but some boilerplate was needed to initialise them. Now this is automatic (and configurable):</p>
<pre class="r"><code class="hljs">index.traj &lt;- trajectory() %&gt;%
  set_global(<span class="hljs-string">"index"</span>, <span class="hljs-number">1</span>, mod=<span class="hljs-string">"+"</span>, init=<span class="hljs-number">10</span>)

simmer() %&gt;%
  add_generator(<span class="hljs-string">"dummy"</span>, index.traj, at(<span class="hljs-number">1</span>:<span class="hljs-number">3</span>), mon=<span class="hljs-number">2</span>) %&gt;%
  run() %&gt;%
  get_mon_attributes()</code></pre>
<pre><code class="hljs">##   time name   key value replication
## 1    1      index    11           1
## 2    2      index    12           1
## 3    3      index    13           1</code></pre>
<p>Finally, the&nbsp;<code>log_</code>&nbsp;activity was created for occasional debugging, but we noticed that&nbsp;<code>simmer</code>&nbsp;users use it a lot more to know what is happening when they build models, but so much output is annoying when a model is complete. Therefore, we have implemented simulation-scoped logging levels to be able to turn on and off specific messages on demand:</p>
<pre class="r"><code class="hljs">log.traj &lt;- trajectory() %&gt;%
  log_(<span class="hljs-string">"This will be always printed"</span>) %&gt;% <span class="hljs-comment"># level=0</span>
  log_(<span class="hljs-string">"This can be disabled"</span>, level=<span class="hljs-number">1</span>)

simmer(log_level=<span class="hljs-number">1</span>) %&gt;%
  add_generator(<span class="hljs-string">"dummy"</span>, log.traj, at(pi)) %&gt;%
  run() %&gt;% invisible()</code></pre>
<pre><code class="hljs">## 3.14159: dummy0: This will be always printed
## 3.14159: dummy0: This can be disabled</code></pre>
<pre class="r"><code class="hljs">simmer() %&gt;% <span class="hljs-comment"># log_level=0</span>
  add_generator(<span class="hljs-string">"dummy"</span>, log.traj, at(pi)) %&gt;%
  run() %&gt;% invisible()</code></pre>
<pre><code class="hljs">## 3.14159: dummy0: This will be always printed</code></pre>
<p>See below for a comprehensive list of changes.</p>
<div id="new-features" class="section level3">
<h3>New features:</h3>
<ul>
<li>The C++ core has been refactorised into a header-only library under&nbsp;<code>inst/include</code>&nbsp;(#147 closing #145). Therefore, from now on it is possible to extend the C++ API from another package by listing&nbsp;<code>simmer</code>&nbsp;under the&nbsp;<code>LinkingTo</code>&nbsp;field in the DESCRIPTION file.</li>
<li>New generic&nbsp;<code>monitor</code>&nbsp;constructor enables the development of new monitoring backends in other packages (179f656, as part of #147).</li>
<li>New simulation-scoped logging levels. The&nbsp;<code>log_</code>&nbsp;activity has a new argument&nbsp;<code>level</code>&nbsp;which determines whether the message is printed depending on a global&nbsp;<code>log_level</code>&nbsp;defined in the&nbsp;<code>simmer</code>&nbsp;constructor (#152).</li>
<li><code>set_attribute</code>&nbsp;and&nbsp;<code>set_global</code>&nbsp;gain a new argument to automatically initialise new attributes (#157). Useful to update counters and indexes in a single line, without initialisation boilerplate.</li>
</ul>
</div>
<div id="minor-changes-and-fixes" class="section level3">
<h3>Minor changes and fixes:</h3>
<ul>
<li>Enhanced exception handling, with more informative error messages (#148).</li>
<li>Refactorisation of the printing methods and associated code (#149).</li>
<li>Allow empty trajectories in sources and activities with sub-trajectories (#151 closing #150).</li>
<li>Enable&nbsp;<code>-DRCPP_PROTECTED_EVAL</code>&nbsp;(Rcpp &gt;= 0.12.17.3), which provides fast evaluation of R expressions by leveraging the new stack unwinding protection API (R &gt;= 3.5.0).</li>
<li>Replace backspace usage in vector&rsquo;s&nbsp;<code>ostream</code>&nbsp;method (2b2f43e).</li>
<li>Fix namespace clashes with&nbsp;<code>rlang</code>&nbsp;and&nbsp;<code>purrr</code>&nbsp;(#154).</li>
</ul>
</div>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Comparte esto:</h3><div class="sd-content"><ul><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-66547" class="share-facebook sd-button share-icon" href="/archives/simmer-4-0-0.html?share=facebook" target="_blank" aria-labelledby="sharing-facebook-66547">
				<span id="sharing-facebook-66547" hidden>Haz clic para compartir en Facebook (Se abre en una ventana nueva)</span>
				<span>Facebook</span>
			</a></li><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-66547" class="share-twitter sd-button share-icon" href="/archives/simmer-4-0-0.html?share=twitter" target="_blank" aria-labelledby="sharing-twitter-66547">
				<span id="sharing-twitter-66547" hidden>Haz clic para compartir en X (Se abre en una ventana nueva)</span>
				<span>X</span>
			</a></li><li class="share-reddit"><a rel="nofollow noopener noreferrer" data-shared="sharing-reddit-66547" class="share-reddit sd-button share-icon" href="/archives/simmer-4-0-0.html?share=reddit" target="_blank" aria-labelledby="sharing-reddit-66547">
				<span id="sharing-reddit-66547" hidden>Haz clic para compartir en Reddit (Se abre en una ventana nueva)</span>
				<span>Reddit</span>
			</a></li><li class="share-tumblr"><a rel="nofollow noopener noreferrer" data-shared="sharing-tumblr-66547" class="share-tumblr sd-button share-icon" href="/archives/simmer-4-0-0.html?share=tumblr" target="_blank" aria-labelledby="sharing-tumblr-66547">
				<span id="sharing-tumblr-66547" hidden>Haz clic para compartir en Tumblr (Se abre en una ventana nueva)</span>
				<span>Tumblr</span>
			</a></li><li class="share-pinterest"><a rel="nofollow noopener noreferrer" data-shared="sharing-pinterest-66547" class="share-pinterest sd-button share-icon" href="/archives/simmer-4-0-0.html?share=pinterest" target="_blank" aria-labelledby="sharing-pinterest-66547">
				<span id="sharing-pinterest-66547" hidden>Haz clic para compartir en Pinterest (Se abre en una ventana nueva)</span>
				<span>Pinterest</span>
			</a></li><li class="share-linkedin"><a rel="nofollow noopener noreferrer" data-shared="sharing-linkedin-66547" class="share-linkedin sd-button share-icon" href="/archives/simmer-4-0-0.html?share=linkedin" target="_blank" aria-labelledby="sharing-linkedin-66547">
				<span id="sharing-linkedin-66547" hidden>Haz clic para compartir en LinkedIn (Se abre en una ventana nueva)</span>
				<span>LinkedIn</span>
			</a></li><li class="share-end"></ul></div></div></div>
			</div><!-- .entry-content -->
</article><!-- #post-## -->

			
				
<article id="post-66151" class="post-66151 post type-post status-publish format-standard hentry category-r">
	<header class="entry-header">
		
					<h2 class="entry-title"><a href="/archives/simmer-3-8-0.html" rel="bookmark">simmer 3.8.0</a></h2>				
				<div class="entry-meta">
			<span class="posted-on"><a href="/archives/simmer-3-8-0.html" rel="bookmark"><time class="entry-date published updated" datetime="2018-05-07T18:14:38+02:00">7 mayo 2018</time></a></span><span class="byline"> <span class="author vcard"><a class="url fn n" href="/archives/author/admin">I&ntilde;aki &Uacute;car</a></span></span><span class="comments-link"><a href="/archives/simmer-3-8-0.html#comments">1 comentario</a></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>The 3.8.0 release of&nbsp;<a href="http://r-simmer.org/">simmer</a>, the Discrete-Event Simulator for R, hit CRAN almost a week ago, and Windows binaries are already available. This version includes two highly requested new features that justify this second consecutive minor release.</p>
<div id="attachment-of-precomputed-data" class="section level3">
<h3>Attachment of precomputed data</h3>
<p>Until v3.7.0, the&nbsp;<em>generator</em>&nbsp;was the only means to attach data to trajectories, and it was primarily intended for dynamic generation of arrivals:</p>
<pre class="r"><code class="hljs"><span class="hljs-keyword">library</span>(simmer)
set.seed(<span class="hljs-number">42</span>)

hello_sayer &lt;- trajectory() %&gt;%
  log_(<span class="hljs-string">"hello!"</span>)

simmer() %&gt;%
  add_generator(<span class="hljs-string">"dummy"</span>, hello_sayer, <span class="hljs-keyword">function</span>() rexp(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)) %&gt;%
  run(until=<span class="hljs-number">2</span>)</code></pre>
<pre><code class="hljs">## 0.198337: dummy0: hello!
## 0.859232: dummy1: hello!
## 1.14272: dummy2: hello!
## 1.18091: dummy3: hello!
## 1.65409: dummy4: hello!</code></pre>
<pre><code class="hljs">## simmer environment: anonymous | now: 2 | next: 3.11771876826972
## { Monitor: in memory }
## { Source: dummy | monitored: 1 | n_generated: 6 }</code></pre>
<p>Although it may be used to attach precomputed data too, especially using the&nbsp;<code>at()</code>&nbsp;adaptor:</p>
<pre class="r"><code class="hljs">simmer() %&gt;%
  add_generator(<span class="hljs-string">"dummy"</span>, hello_sayer, at(seq(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0.5</span>))) %&gt;%
  run(until=<span class="hljs-number">2</span>)</code></pre>
<pre><code class="hljs">## 0: dummy0: hello!
## 0.5: dummy1: hello!
## 1: dummy2: hello!
## 1.5: dummy3: hello!</code></pre>
<pre><code class="hljs">## simmer environment: anonymous | now: 2 | next: 2
## { Monitor: in memory }
## { Source: dummy | monitored: 1 | n_generated: 21 }</code></pre>
<p>Now, let&rsquo;s say that we want to attach some empirical data, and our observations not only include arrival times, but also priorities and some attributes (e.g., measured service times), as in&nbsp;<a href="https://stackoverflow.com/questions/44865924/using-simmer-to-build-a-specific-model">this question</a>&nbsp;on StackOverflow:</p>
<pre class="r"><code class="hljs">myData &lt;- data.frame(
  time = c(<span class="hljs-number">1</span>:<span class="hljs-number">10</span>,<span class="hljs-number">1</span>:<span class="hljs-number">5</span>), 
  priority = <span class="hljs-number">1</span>:<span class="hljs-number">3</span>, 
  duration = rnorm(<span class="hljs-number">15</span>, <span class="hljs-number">50</span>, <span class="hljs-number">5</span>)) %&gt;%
  dplyr::arrange(time)</code></pre>
<p>This is indeed possible using generators, but it requires some trickery; more specifically, the clever usage of a&nbsp;<em>consumer</em>&nbsp;function as follows:</p>
<pre class="r"><code class="hljs">consume &lt;- <span class="hljs-keyword">function</span>(x, prio=<span class="hljs-literal">FALSE</span>) {
  i &lt;- <span class="hljs-number">0</span>
  <span class="hljs-keyword">function</span>() {
    i &lt;&lt;- i + <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> (prio) c(x[[i]], x[[i]], <span class="hljs-literal">FALSE</span>)
    <span class="hljs-keyword">else</span> x[[i]]
  }
}

activityTraj &lt;- trajectory() %&gt;%
  seize(<span class="hljs-string">"worker"</span>) %&gt;%
  timeout_from_attribute(<span class="hljs-string">"duration"</span>) %&gt;%
  release(<span class="hljs-string">"worker"</span>)

initialization &lt;- trajectory() %&gt;%
  set_prioritization(consume(myData$priority, <span class="hljs-literal">TRUE</span>)) %&gt;%
  set_attribute(<span class="hljs-string">"duration"</span>, consume(myData$duration)) %&gt;%
  join(activityTraj)

arrivals_gen &lt;- simmer() %&gt;%
  add_resource(<span class="hljs-string">"worker"</span>, <span class="hljs-number">2</span>, preemptive=<span class="hljs-literal">TRUE</span>) %&gt;%
  add_generator(<span class="hljs-string">"dummy_"</span>, initialization, at(myData$time)) %&gt;%
  run() %&gt;%
  get_mon_arrivals()

<span class="hljs-comment"># check the resulting duration times</span>
activity_time &lt;- arrivals_gen %&gt;%
  tidyr::separate(name, c(<span class="hljs-string">"prefix"</span>, <span class="hljs-string">"n"</span>), convert=<span class="hljs-literal">TRUE</span>) %&gt;%
  dplyr::arrange(n) %&gt;%
  dplyr::pull(activity_time)

all(activity_time == myData$duration)</code></pre>
<pre><code class="hljs">## [1] TRUE</code></pre>
<p>Since this v3.8.0, the new data source&nbsp;<code>add_dataframe</code>&nbsp;greatly simplifies this process:</p>
<pre class="r"><code class="hljs">arrivals_df &lt;- simmer() %&gt;%
  add_resource(<span class="hljs-string">"worker"</span>, <span class="hljs-number">2</span>, preemptive=<span class="hljs-literal">TRUE</span>) %&gt;%
  add_dataframe(<span class="hljs-string">"dummy_"</span>, activityTraj, myData, time=<span class="hljs-string">"absolute"</span>) %&gt;%
  run() %&gt;%
  get_mon_arrivals()

identical(arrivals_gen, arrivals_df)</code></pre>
<pre><code class="hljs">## [1] TRUE</code></pre>
</div>
<div id="on-disk-monitoring" class="section level3">
<h3>On-disk monitoring</h3>
<p>As some users noted (see&nbsp;<a href="https://groups.google.com/d/msg/simmer-devel/A4M7uP0Lmgw/f_0wkctKBQAJ">1</a>,&nbsp;<a href="https://groups.google.com/d/msg/simmer-devel/sO1OlQTpoXw/VL4-_iTBAQAJ">2</a>), the default in-memory monitoring capabilities can turn problematic for very long simulations. To address this issue, the&nbsp;<code>simmer()</code>&nbsp;constructor gains a new argument,&nbsp;<code>mon</code>, to provide different types of monitors. Monitoring is still performed in-memory by default, but as of v3.8.0, it can be offloaded to disk through&nbsp;<code>monitor_delim()</code>&nbsp;and&nbsp;<code>monitor_csv()</code>, which produce flat delimited files.</p>
<pre class="r"><code class="hljs">mon &lt;- monitor_csv()
mon</code></pre>
<pre><code class="hljs">## simmer monitor: to disk (delimited files)
## { arrivals: /tmp/RtmpAlQH2g/file6933ce99281_arrivals.csv }
## { releases: /tmp/RtmpAlQH2g/file6933ce99281_releases.csv }
## { attributes: /tmp/RtmpAlQH2g/file6933ce99281_attributes.csv }
## { resources: /tmp/RtmpAlQH2g/file6933ce99281_resources.csv }</code></pre>
<pre class="r"><code class="hljs">env &lt;- simmer(mon=mon) %&gt;%
  add_generator(<span class="hljs-string">"dummy"</span>, hello_sayer, <span class="hljs-keyword">function</span>() rexp(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)) %&gt;%
  run(until=<span class="hljs-number">2</span>)</code></pre>
<pre><code class="hljs">## 0.26309: dummy0: hello!
## 0.982183: dummy1: hello!</code></pre>
<pre class="r"><code class="hljs">env</code></pre>
<pre><code class="hljs">## simmer environment: anonymous | now: 2 | next: 2.29067480322535
## { Monitor: to disk (delimited files) }
##   { arrivals: /tmp/RtmpAlQH2g/file6933ce99281_arrivals.csv }
##   { releases: /tmp/RtmpAlQH2g/file6933ce99281_releases.csv }
##   { attributes: /tmp/RtmpAlQH2g/file6933ce99281_attributes.csv }
##   { resources: /tmp/RtmpAlQH2g/file6933ce99281_resources.csv }
## { Source: dummy | monitored: 1 | n_generated: 3 }</code></pre>
<pre class="r"><code class="hljs">read.csv(mon$handlers[<span class="hljs-string">"arrivals"</span>]) <span class="hljs-comment"># direct access</span></code></pre>
<pre><code class="hljs">##     name start_time  end_time activity_time finished
## 1 dummy0  0.2630904 0.2630904             0        1
## 2 dummy1  0.9821828 0.9821828             0        1</code></pre>
<pre class="r"><code class="hljs">get_mon_arrivals(env)              <span class="hljs-comment"># adds the "replication" column</span></code></pre>
<pre><code class="hljs">##     name start_time  end_time activity_time finished replication
## 1 dummy0  0.2630904 0.2630904             0        1           1
## 2 dummy1  0.9821828 0.9821828             0        1           1</code></pre>
<p>See below for a comprehensive list of changes.</p>
</div>
<div id="new-features" class="section level3">
<h3>New features:</h3>
<ul>
<li>New data source&nbsp;<code>add_dataframe</code>&nbsp;enables the attachment of precomputed data, in the form of a data frame, to a trajectory. It can be used instead of (or along with)&nbsp;<code>add_generator</code>. The most notable advantage over the latter is that&nbsp;<code>add_dataframe</code>&nbsp;is able to automatically set attributes and prioritisation values per arrival based on columns of the provided data frame (#140 closing #123).</li>
<li>New&nbsp;<code>set_source</code>&nbsp;activity deprecates&nbsp;<code>set_distribution()</code>. It works both for generators and data sources (275a09c, as part of #140).</li>
<li>New monitoring interface allows for disk offloading. The&nbsp;<code>simmer()</code>&nbsp;constructor gains a new argument&nbsp;<code>mon</code>&nbsp;to provide different types of monitors. By default, monitoring is performed in-memory, as usual. Additionally, monitoring can be offloaded to disk through&nbsp;<code>monitor_delim</code>&nbsp;and&nbsp;<code>monitor_csv</code>, which produce flat delimited files. But more importantly, the C++ interface has been refactorised to enable the development of new monitoring backends (#146 closing #119).</li>
</ul>
</div>
<div id="minor-changes-and-fixes" class="section level3">
<h3>Minor changes and fixes:</h3>
<ul>
<li>Some documentation improvements (1e14ed7, 194ed05).</li>
<li>New default&nbsp;<code>until=Inf</code>&nbsp;for the&nbsp;<code>run</code>&nbsp;method (3e6aae9, as part of #140).</li>
<li><code>branch</code>&nbsp;and&nbsp;<code>clone</code>&nbsp;now accept lists of trajectories, in the same way as&nbsp;<code>join</code>, so that there is no need to use&nbsp;<code>do.call</code>&nbsp;(#142).</li>
<li>The argument&nbsp;<code>continue</code>&nbsp;(present in&nbsp;<code>seize</code>&nbsp;and&nbsp;<code>branch</code>) is recycled if only one value is provided but several sub-trajectories are defined (#143).</li>
<li>Fix process reset: sources are reset in strict order of creation (e7d909b).</li>
<li>Fix infinite timeouts (#144).</li>
</ul>
</div>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing"><h3 class="sd-title">Comparte esto:</h3><div class="sd-content"><ul><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-66151" class="share-facebook sd-button share-icon" href="/archives/simmer-3-8-0.html?share=facebook" target="_blank" aria-labelledby="sharing-facebook-66151">
				<span id="sharing-facebook-66151" hidden>Haz clic para compartir en Facebook (Se abre en una ventana nueva)</span>
				<span>Facebook</span>
			</a></li><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-66151" class="share-twitter sd-button share-icon" href="/archives/simmer-3-8-0.html?share=twitter" target="_blank" aria-labelledby="sharing-twitter-66151">
				<span id="sharing-twitter-66151" hidden>Haz clic para compartir en X (Se abre en una ventana nueva)</span>
				<span>X</span>
			</a></li><li class="share-reddit"><a rel="nofollow noopener noreferrer" data-shared="sharing-reddit-66151" class="share-reddit sd-button share-icon" href="/archives/simmer-3-8-0.html?share=reddit" target="_blank" aria-labelledby="sharing-reddit-66151">
				<span id="sharing-reddit-66151" hidden>Haz clic para compartir en Reddit (Se abre en una ventana nueva)</span>
				<span>Reddit</span>
			</a></li><li class="share-tumblr"><a rel="nofollow noopener noreferrer" data-shared="sharing-tumblr-66151" class="share-tumblr sd-button share-icon" href="/archives/simmer-3-8-0.html?share=tumblr" target="_blank" aria-labelledby="sharing-tumblr-66151">
				<span id="sharing-tumblr-66151" hidden>Haz clic para compartir en Tumblr (Se abre en una ventana nueva)</span>
				<span>Tumblr</span>
			</a></li><li class="share-pinterest"><a rel="nofollow noopener noreferrer" data-shared="sharing-pinterest-66151" class="share-pinterest sd-button share-icon" href="/archives/simmer-3-8-0.html?share=pinterest" target="_blank" aria-labelledby="sharing-pinterest-66151">
				<span id="sharing-pinterest-66151" hidden>Haz clic para compartir en Pinterest (Se abre en una ventana nueva)</span>
				<span>Pinterest</span>
			</a></li><li class="share-linkedin"><a rel="nofollow noopener noreferrer" data-shared="sharing-linkedin-66151" class="share-linkedin sd-button share-icon" href="/archives/simmer-3-8-0.html?share=linkedin" target="_blank" aria-labelledby="sharing-linkedin-66151">
				<span id="sharing-linkedin-66151" hidden>Haz clic para compartir en LinkedIn (Se abre en una ventana nueva)</span>
				<span>LinkedIn</span>
			</a></li><li class="share-end"></ul></div></div></div>
			</div><!-- .entry-content -->
</article><!-- #post-## -->

			
			
	<nav class="navigation posts-navigation" aria-label="Entradas">
		<h2 class="screen-reader-text">Navegaci&oacute;n de entradas</h2>
		<div class="nav-links"><div class="nav-previous"><a href="/archives/category/r/page/4">Entradas anteriores</a></div><div class="nav-next"><a href="/archives/category/r/page/2">Entradas siguientes</a></div></div>
	</nav>
		
		</main><!-- #main -->
	</div><!-- #primary -->


	</div><!-- #content -->

	<footer id="colophon" class="site-footer" role="contentinfo">
		
			<div class="footer-widgets clear">

				
					<div class="widget-area">

						<aside id="rss_links-2" class="widget widget_rss_links"><p><a target="_self" href="/feed" title="Suscribirse a las entradas"><img src="/wp-content/plugins/jetpack/images/rss/orange-small.png" alt="Feed RSS">&nbsp;RSS: Entradas</a></p><p><a target="_self" href="/comments/feed" title="Suscribirse a los comentarios"><img src="/wp-content/plugins/jetpack/images/rss/orange-small.png" alt="Feed RSS">&nbsp;RSS: Comentarios</a></p>
</aside><aside id="search-3" class="widget widget_search"><h2 class="widget-title">Buscar</h2><form role="search" method="get" class="search-form" action="/">
				<label>
					<span class="screen-reader-text">Buscar:</span>
					<input type="search" class="search-field" placeholder="Buscar &hellip;" value="" name="s">
				</label>
				<input type="submit" class="search-submit" value="Buscar">
			</form></aside><aside id="recent-comments-3" class="widget widget_recent_comments"><h2 class="widget-title">Comentarios recientes</h2><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href="https://www.r-bloggers.com/2022/07/rspm-easy-access-to-rspm-binary-packages-with-automatic-management-of-system-requirements/" class="url" rel="ugc external nofollow">{rspm}: easy access to RSPM binary packages with automatic management of system requirements | R-bloggers</a></span> en <a href="/archives/rspm-easy-access-to-rspm-binary-packages-with-automatic-management-of-system-requirements.html#comment-16858">{rspm}: easy access to RSPM binary packages with automatic management of system requirements</a></li><li class="recentcomments"><span class="comment-author-link"><a href="https://www.lukaszderylo.pl/" class="url" rel="ugc external nofollow">Lukasz</a></span> en <a href="/archives/rspm-easy-access-to-rspm-binary-packages-with-automatic-management-of-system-requirements.html#comment-16857">{rspm}: easy access to RSPM binary packages with automatic management of system requirements</a></li><li class="recentcomments"><span class="comment-author-link">Joon</span> en <a href="/archives/least-squares-as-springs-the-shiny-app.html#comment-16753">Least squares as springs, the Shiny app</a></li><li class="recentcomments"><span class="comment-author-link"><a href="https://www.r-bloggers.com/2020/12/least-squares-as-springs-the-shiny-app/?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+RBloggers+%28R+bloggers%29" class="url" rel="ugc external nofollow">Least squares as springs, the Shiny app | R-bloggers</a></span> en <a href="/archives/least-squares-as-springs-the-shiny-app.html#comment-16750">Least squares as springs, the Shiny app</a></li><li class="recentcomments"><span class="comment-author-link"><a href="https://data-science-austria.at/2020/12/07/least-squares-as-springs-the-shiny-app/" class="url" rel="ugc external nofollow">Least squares as springs, the Shiny app &ndash; Data Science Austria</a></span> en <a href="/archives/least-squares-as-springs-the-shiny-app.html#comment-16749">Least squares as springs, the Shiny app</a></li></ul></aside>
					</div><!-- .widget-area -->

				
				
					<div class="widget-area">

						<aside id="text-3" class="widget widget_text">			<div class="textwidget"><p>Blog personal sobre ciencia, tecnolog&iacute;a, m&uacute;sica, a veces pol&iacute;tica y lo que se nos vaya ocurriendo sobre la marcha.</p>
<p>Esta obra est&aacute; bajo una licencia de <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons</a>.</p>
</div>
		</aside><aside id="linkcat-2" class="widget widget_links"><h2 class="widget-title">Enlaces recomendados</h2>
	<ul class="xoxo blogroll">
<li><a href="http://culturacientifica.com/" title="Cuaderno de Cultura Cient&iacute;fica: Un blog de la C&aacute;tedra de Cultura Cient&iacute;fica de la UPV/EHU">Cuaderno de Cultura Cient&iacute;fica</a></li>
<li><a href="http://eltamiz.com/" title="Ciencia por doquier">El Tamiz</a></li>
<li><a href="http://www.escolar.net/" title="El blog de Ignacio Escolar">Escolar.net</a></li>
<li><a href="http://www.fubiz.net/" title="Creaciones visuales">Fubiz</a></li>
<li><a href="http://www.malaprensa.com/" title="Errores y chapuzas de la prensa espa&ntilde;ola: n&uacute;meros equivocados, gr&aacute;ficos incorrectos, fallos l&oacute;gicos, conceptos err&oacute;neos, mala interpretaci&oacute;n de estad&iacute;sticas o datos cient&iacute;ficos&hellip;">Malaprensa</a></li>
<li><a href="http://esmateria.com/" title="La web de noticias de ciencia">Materia</a></li>
<li><a href="http://www.microsiervos.com/" title="Microsiervos">Microsiervos</a></li>
<li><a href="http://naukas.com/" title="Comunidad sobre ciencia y escepticismo en espa&ntilde;ol (anteriormente Amazings.es)">Naukas</a></li>
<li><a href="https://www.r-bloggers.com/" title="R news and tutorials contributed by (600) R bloggers">R-bloggers</a></li>
<li><a href="http://www.securitybydefault.com/" title="Imprescindible blog sobre seguridad digital">Security By Default</a></li>

	</ul>
</aside>
<aside id="linkcat-19" class="widget widget_links"><h2 class="widget-title">Humor gr&aacute;fico</h2>
	<ul class="xoxo blogroll">
<li><a href="http://abstrusegoose.com/">Abstruse Goose</a></li>
<li><a href="http://www.lapulgasnob.com/" title="Humor esc&eacute;ptico">La pulga snob</a></li>
<li><a href="http://www.phdcomics.com/" title="La tira c&oacute;mica acerca de la vida (o la falta de ella) en el mundo acad&eacute;mico">PHD Comics</a></li>
<li><a href="http://www.smbc-comics.com/">SMBC</a></li>
<li><a href="https://www.eldiario.es/autores/bernardo_vergara/" title="Humor de rojos">Territorio Vergara</a></li>
<li><a href="http://xkcd.com/">xkcd</a></li>

	</ul>
</aside>

					</div><!-- .widget-area -->

				
				
					<div class="widget-area">

						<aside id="linkcat-18" class="widget widget_links"><h2 class="widget-title">Weblogs amigos</h2>
	<ul class="xoxo blogroll">
<li><a href="http://uncuartodeambiente.es/" title="Ciencia y medio ambiente">1/4 de ambiente</a></li>
<li><a href="http://abordodelottoneurath.blogspot.com/" title="Ciencia y filosof&iacute;a. Y econom&iacute;a, y pol&iacute;tica, y religi&oacute;n, y m&aacute;s.">A bordo del Otto Neurath</a></li>
<li><a href="http://biotay.blogspot.com.es/" title="Blog personal de Tay">BioTay</a></li>
<li><a href="http://brucknerite.net/" title="Blog personal de Iv&aacute;n Rivera, AKA brucknerite">brucknerite</a></li>
<li><a href="http://cienciadebolsillo.com/" title="El blog de Ambros">Ciencia de Bolsillo</a></li>
<li><a href="http://cienciaxxi.es/blog/" title="Ciencia en el XXI. Mirando con la mente">Ciencia en el XXI</a></li>
<li><a href="http://etiopica.blogspot.com/" title="Tela Totius Terrae">Etiopica</a></li>
<li><a href="http://edocet.naukas.com/" title="La experiencia ense&ntilde;a que es mucho m&aacute;s lo que desconocemos que lo que sabemos. Tambi&eacute;n que muchas veces es m&aacute;s interesante el camino que el destino final y que lo verdaderamente revolucionario empieza con un &ldquo;&iexcl;qu&eacute; curioso!&rdquo;">Experientia docet</a></li>
<li><a href="http://flujobidireccional.blogspot.com/" title="El blog de Pierre Arnaud">Flujo bidireccional</a></li>
<li><a href="http://www.fogonazos.es/" title="Cosas curiosas y sorprendentes">Fogonazos</a></li>
<li><a href="http://gaussianos.com/" title="Porque todo tiende a infinito">Gaussianos</a></li>
<li><a href="http://halondisparado.dreamhosters.com/" title="Descarga de gas hal&oacute;n 1301. Abandonen la sala.">Hal&oacute;n Disparado</a></li>
<li><a href="http://www.historiasdelaciencia.com/" title="El blog de Fernando del &Aacute;lamo">Historias de la Ciencia</a></li>
<li><a href="http://joaquinsevilla.blogspot.com.es/" title="Una visi&oacute;n personal de la Universidad en general y la UPNA en particular; la ciencia, la docencia y otras hierbas">Joaqu&iacute;n Sevilla Mor&oacute;der</a></li>
<li><a href="http://aldea-irreductible.blogspot.com/" title="Blog cultural de Javi Pel&aacute;ez">La aldea irreductible</a></li>
<li><a href="http://lacienciaesbella.blogspot.com.es/" title="No olvides que la ciencia nos proporciona una forma de pensar racional, que modifica nuestro mundo a pasos agigantados y que, adem&aacute;s, es bella">La ciencia es bella</a></li>
<li><a href="http://www.blogseitb.com/cienciayhumanismo/" title="Ciencia y humanismo de la mano de Juan Ignacio P&eacute;rez">La naturaleza humana</a></li>
<li><a href="http://rinzewind.org/" title="Blog personal de Jos&eacute; Mar&iacute;a Mateos, AKA el tito Rinze">Las penas del Agente Smith</a></li>
<li><a href="http://www.maikelnai.es/" title="Traducciones de art&iacute;culos de divulgaci&oacute;n cient&iacute;fica">Maikelnai&rsquo;s blog</a></li>
<li><a href="http://perarduaadastra.eu/" title="El blog de EC-JPR">Per Ardua ad Astra</a></li>
<li><a href="http://javarm.blogalia.com/" title="El blog de Javier Armentia">Por La Boca Muere El Pez</a></li>
<li><a href="http://www.puratura.com/blog" title="Blog de dise&ntilde;o y arte de Almudena">Puratura blog</a></li>
<li><a href="http://scientiablog.com/" title="por Jos&eacute; Manuel L&oacute;pez Nicol&aacute;s">SCIENTIA</a></li>
<li><a href="http://sonicando.com/" title="Blog de Ciencia y M&uacute;sica">Sonicando</a></li>
<li><a href="http://tallcute.wordpress.com/" title="Tall, cute, and biochemist">Tall &amp; Cute</a></li>
<li><a href="http://jmmulet.naukas.com/" title="El blog de J. M. Mulet">Tomates con genes</a></li>
<li><a href="http://www.wisphysics.es/" title="Blog de divulgaci&oacute;n cient&iacute;fica, centrado principalmente en la f&iacute;sica y la astrof&iacute;sica, y con alguna que otra noticia de tecnolog&iacute;a e inform&aacute;tica">Wis Physics</a></li>

	</ul>
</aside>

					</div><!-- .widget-area -->

				
			</div><!-- .footer-widgets -->

		
		<div class="site-info">
			<a href="http://es.wordpress.org/">Creado con WordPress</a>
			<span class="sep"> | </span>
			Tema: Libre por <a href="http://wordpress.com/themes/" rel="designer">Automattic</a>.		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type="speculationrules">
{"prefetch":[{"source":"document","where":{"and":[{"href_matches":"\/*"},{"not":{"href_matches":["\/wp-*.php","\/wp-admin\/*","\/wp-content\/uploads\/*","\/wp-content\/*","\/wp-content\/plugins\/*","\/wp-content\/themes\/libre\/*","\/*\\?(.+)"]}},{"not":{"selector_matches":"a[rel~=\"nofollow\"]"}},{"not":{"selector_matches":".no-prefetch, .no-prefetch a"}}]},"eagerness":"conservative"}]}
</script>

	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"\/archives\/simmer-4-0-1.html":66964,"\/archives\/read-the-docs-before-questioning-rs-defaults.html":66804,"\/archives\/boost-the-speed-of-r-calls-from-rcpp.html":66553,"\/archives\/simmer-4-0-0.html":66547,"\/archives\/simmer-3-8-0.html":66151};
	</script>
						<link rel="stylesheet" id="hljstheme-css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css?ver=0.6.2" type="text/css" media="all">
<script type="text/javascript" id="libre-script-js-extra">
/* <![CDATA[ */
var libreadminbar = [""];
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/themes/libre/js/libre.js?ver=20150623" id="libre-script-js"></script>
<script type="text/javascript" src="/wp-content/themes/libre/js/navigation.js?ver=20120206" id="libre-navigation-js"></script>
<script type="text/javascript" src="/wp-content/themes/libre/js/skip-link-focus-fix.js?ver=20130115" id="libre-skip-link-focus-fix-js"></script>
<script type="text/javascript" id="jetpack-stats-js-before">
/* <![CDATA[ */
_stq = window._stq || [];
_stq.push([ "view", JSON.parse("{\"v\":\"ext\",\"blog\":\"111246442\",\"post\":\"0\",\"tz\":\"2\",\"srv\":\"www.enchufa2.es\",\"arch_cat\":\"r\",\"arch_results\":\"5\",\"j\":\"1:14.9.1\"}") ]);
_stq.push([ "clickTrackerInit", "111246442", "0" ]);
/* ]]> */
</script>
<script type="text/javascript" src="https://stats.wp.com/e-202535.js" id="jetpack-stats-js" defer="defer" data-wp-strategy="defer"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js?ver=0.6.2" id="hljs-js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js?ver=0.6.2" id="hljs_lang_r-js"></script>
<script type="text/javascript" id="sharing-js-js-extra">
/* <![CDATA[ */
var sharing_js_options = {"lang":"es","counts":"1","is_stats_active":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="/wp-content/plugins/jetpack/_inc/build/sharedaddy/sharing.min.js?ver=14.9.1" id="sharing-js-js"></script>
<script type="text/javascript" id="sharing-js-js-after">
/* <![CDATA[ */
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-facebook' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-facebook' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
						return false;
					}
				} );
			} )();
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-twitter' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-twitter' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
						return false;
					}
				} );
			} )();
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-tumblr' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-tumblr' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomtumblr', 'menubar=1,resizable=1,width=450,height=450' );
						return false;
					}
				} );
			} )();
var windowOpen;
			( function () {
				function matches( el, sel ) {
					return !! (
						el.matches && el.matches( sel ) ||
						el.msMatchesSelector && el.msMatchesSelector( sel )
					);
				}

				document.body.addEventListener( 'click', function ( event ) {
					if ( ! event.target ) {
						return;
					}

					var el;
					if ( matches( event.target, 'a.share-linkedin' ) ) {
						el = event.target;
					} else if ( event.target.parentNode && matches( event.target.parentNode, 'a.share-linkedin' ) ) {
						el = event.target.parentNode;
					}

					if ( el ) {
						event.preventDefault();

						// If there's another sharing window open, close it.
						if ( typeof windowOpen !== 'undefined' ) {
							windowOpen.close();
						}
						windowOpen = window.open( el.getAttribute( 'href' ), 'wpcomlinkedin', 'menubar=1,resizable=1,width=580,height=450' );
						return false;
					}
				} );
			} )();
/* ]]> */
</script>
    <style>code.hljs { /*margin: 5px;*/ }</style>
    <script type="text/javascript">
    (function($, window) {
        var init_fn_flag = false;
        var init_fn = (function() {
            if (init_fn_flag)
                return;
            init_fn_flag = true;
             hljs.configure({"tabReplace":"  "});
            $('pre code').each(function(i, block) {
                hljs.highlightBlock(block);
            });
        });
        $(document).ready(init_fn);
        $(window).on("load", init_fn);
    })(jQuery, window);
    </script>

</body>
</html>
